Version 4
SHEET 1 880 680
WIRE 544 -160 432 -160
WIRE -448 -32 -448 -64
WIRE 112 -32 -176 -32
WIRE 256 -32 112 -32
WIRE 432 -32 432 -160
WIRE 432 -32 256 -32
WIRE 112 -16 112 -32
WIRE 256 0 256 -32
WIRE 208 16 192 16
WIRE -176 112 -176 48
WIRE 112 112 112 48
WIRE 112 112 -176 112
WIRE 192 112 192 16
WIRE 192 112 112 112
WIRE 432 112 432 -32
WIRE -176 128 -176 112
WIRE -448 176 -448 64
WIRE 112 176 112 112
WIRE 256 208 256 96
WIRE -512 224 -512 16
WIRE -176 224 -176 208
WIRE 112 272 112 240
WIRE 192 288 192 112
WIRE 208 288 192 288
WIRE 432 288 432 208
WIRE -448 304 -448 272
WIRE -224 304 -320 304
WIRE -176 336 -176 320
WIRE 256 336 256 304
WIRE 432 400 432 368
FLAG -176 336 0
FLAG -448 304 0
FLAG 432 400 0
FLAG 544 -80 0
FLAG -320 384 0
FLAG 256 336 0
FLAG 112 272 0
FLAG -448 -64 0
SYMBOL EXTRA\\IRF\\PMOSFET\\irf9540n 432 160 R0
SYMATTR InstName U1
SYMBOL nmos -224 224 R0
SYMATTR InstName M1
SYMATTR Value 2N7002
SYMBOL res -192 -48 R0
SYMATTR InstName R1
SYMATTR Value {Ratio*DR}
SYMBOL zener 128 48 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value KDZV16B
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res -192 112 R0
SYMATTR InstName R2
SYMATTR Value {DR}
SYMBOL voltage 544 -176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 30
SYMBOL res 416 272 R0
SYMATTR InstName R3
SYMATTR Value 1
SYMBOL voltage -320 288 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(12 0 0 1n 1n 5m 10m)
SYMBOL pmos 208 96 M180
SYMATTR InstName M4
SYMATTR Value Si1013
SYMBOL nmos 208 208 R0
SYMATTR InstName M5
SYMATTR Value 2N7002
SYMBOL npn -512 -32 R0
SYMATTR InstName Q1
SYMBOL pnp -512 272 M180
SYMATTR InstName Q2
SYMBOL zener 128 240 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value KDZV16B
SYMATTR Description Diode
SYMATTR Type diode
TEXT -280 480 Left 2 !.tran 10m
TEXT -328 -208 Left 2 !.param Ratio=10 DR=1k
TEXT -312 -160 Left 2 ;.step param DR list 100 500 1k
