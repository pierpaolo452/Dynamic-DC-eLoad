Version 4
SHEET 1 2764 1176
WIRE 1760 128 -512 128
WIRE -512 144 -512 128
WIRE 1760 160 1760 128
WIRE 1984 192 1936 192
WIRE 1872 208 1840 208
WIRE 2096 224 1936 224
WIRE 2096 240 2096 224
WIRE 1984 320 1984 192
WIRE 1984 320 1680 320
WIRE 912 336 912 304
WIRE 944 336 912 336
WIRE 1040 336 1024 336
WIRE 2096 384 2096 320
WIRE -512 400 -512 224
WIRE -336 448 -336 416
WIRE -336 448 -432 448
WIRE -272 448 -336 448
WIRE 1072 480 1008 480
WIRE 1104 480 1072 480
WIRE -336 496 -336 448
WIRE 800 496 -208 496
WIRE 912 496 912 336
WIRE 912 496 880 496
WIRE 944 496 912 496
WIRE 1680 496 1680 320
WIRE 1680 496 1504 496
WIRE 2096 496 2096 464
WIRE 1040 512 1040 336
WIRE 1040 512 1008 512
WIRE 1312 512 1312 480
WIRE 1312 512 1040 512
WIRE 1440 512 1312 512
WIRE 1552 528 1504 528
WIRE 1680 528 1680 496
WIRE -512 544 -512 496
WIRE 1760 544 1760 256
WIRE 1760 544 1728 544
WIRE 1312 560 1312 512
WIRE 1392 608 1376 608
WIRE 912 624 912 496
WIRE 1072 624 1072 480
WIRE 1392 640 1392 608
WIRE 1552 640 1552 528
WIRE 1728 640 1728 592
WIRE 1760 640 1760 624
WIRE 1760 640 1728 640
WIRE 1760 656 1760 640
WIRE 1152 672 1136 672
WIRE 1152 704 1152 672
WIRE 912 720 912 704
WIRE 912 720 720 720
WIRE 1392 736 1392 720
WIRE 1392 752 1392 736
WIRE 1152 816 1152 784
WIRE 1152 816 1088 816
WIRE 1152 832 1152 816
WIRE 1152 960 1152 912
WIRE 1152 1056 1152 1040
FLAG 1760 656 0
FLAG 1680 608 0
FLAG -384 -192 0
FLAG -496 -192 0
FLAG -496 -272 12V
FLAG -384 -272 -12V
FLAG 1552 720 0
FLAG 1904 240 -12V
FLAG 1904 176 12V
FLAG 2096 496 0
FLAG 1472 480 12V
FLAG 1472 544 0
FLAG 1312 400 12V
FLAG 976 464 12V
FLAG 976 528 0
FLAG 912 224 12V
FLAG 1104 560 0
FLAG 1104 400 12V
FLAG 1072 720 0
FLAG 912 784 0
FLAG 720 720 OCP_EVENT
FLAG 1088 816 RST
FLAG 1152 1056 0
FLAG 1312 656 0
FLAG 1392 832 0
FLAG 1392 736 OCP_override
FLAG -512 544 0
FLAG -336 592 0
FLAG -336 336 12V
SYMBOL voltage -512 128 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE({Vin} {-Vin} 6m 1u 1u 1m 100m)
SYMBOL EXTRA\\IRF\\NMOSFET\\irfz44n 1792 208 M0
SYMATTR InstName U3
SYMBOL voltage 2096 368 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 3 1.1m 900u 900u 1m 10m)
SYMBOL res 1744 528 R0
SYMATTR InstName R3
SYMATTR Value 0.1
SYMBOL e 1680 512 M0
SYMATTR InstName E1
SYMATTR Value 20
SYMBOL voltage -496 -288 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 12
SYMBOL voltage -384 -288 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value -12
SYMBOL voltage 1552 624 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 2
SYMBOL OpAmps\\UniversalOpAmp2 1904 208 M0
SYMATTR InstName U6
SYMATTR SpiceLine Ilimit=200m Rail=0 Vos=0
SYMBOL EXTRA\\ExtraComparators\\LM339A_TI 1472 512 M0
SYMATTR InstName U5
SYMBOL res 1296 384 R0
SYMATTR InstName R4
SYMATTR Value 20k
SYMBOL EXTRA\\ExtraComparators\\LM339A_TI 976 496 M0
SYMATTR InstName U4
SYMBOL res 928 352 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res 896 208 R0
SYMATTR InstName R6
SYMATTR Value 2k
SYMBOL res 1088 384 R0
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res 1088 464 R0
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL voltage 1152 816 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value PULSE(0 3.3 0 1u 1u 1m 100m)
SYMBOL res 1136 688 R0
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL npn 1136 624 M0
SYMATTR InstName Q3
SYMATTR Value 2N3904
SYMBOL res 896 480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 1k
SYMBOL zener 928 784 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value 1N749
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 896 608 R0
SYMATTR InstName R12
SYMATTR Value 10k
SYMBOL voltage 2096 224 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value PULSE(0 12 8m 1n 1n 1m 100m)
SYMBOL voltage 1152 944 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value PULSE(0 3.3 4m 1u 1u 1m 100m)
SYMBOL res 1376 624 R0
SYMATTR InstName R13
SYMATTR Value 1k
SYMBOL npn 1376 560 M0
SYMATTR InstName Q4
SYMATTR Value 2N3904
SYMBOL voltage 1392 736 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V9
SYMATTR Value 0
SYMBOL EXTRA\\IRF\\NMOSFET\\irfz44n -480 448 M0
SYMATTR InstName U7
SYMBOL npn -208 448 M0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL npn -272 496 M0
SYMATTR InstName Q2
SYMATTR Value 2N3904
SYMBOL res -352 320 R0
SYMATTR InstName R1
SYMATTR Value 1k
TEXT -224 -224 Left 2 !.tran 10m
TEXT -528 8 Left 2 !.param Vin=12
