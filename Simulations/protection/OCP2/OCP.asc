Version 4
SHEET 1 2764 1300
WIRE 1264 -320 1120 -320
WIRE 1408 -320 1264 -320
WIRE 1760 -320 1408 -320
WIRE 2032 -320 1760 -320
WIRE 1264 -288 1264 -320
WIRE 2032 -256 2032 -320
WIRE 912 -240 912 -256
WIRE 992 -240 912 -240
WIRE 2032 -240 2032 -256
WIRE 1408 -224 1408 -320
WIRE 1760 -224 1760 -320
WIRE 1760 -224 1648 -224
WIRE 1120 -208 1120 -320
WIRE 1360 -208 1328 -208
WIRE 912 -192 912 -240
WIRE 1264 -176 1264 -224
WIRE 1328 -176 1328 -208
WIRE 1328 -176 1264 -176
WIRE 1264 -160 1264 -176
WIRE 1760 -128 1760 -224
WIRE 992 -112 992 -240
WIRE 1648 -80 1648 -160
WIRE 1680 -80 1648 -80
WIRE 912 -64 912 -112
WIRE 976 -64 912 -64
WIRE 1120 -64 1120 -128
WIRE 1120 -64 1072 -64
WIRE 1264 -64 1264 -80
WIRE 1264 -64 1120 -64
WIRE 1408 -64 1408 -128
WIRE 1648 -64 1648 -80
WIRE 1648 -64 1408 -64
WIRE 1408 -16 1408 -64
WIRE 912 16 912 -64
WIRE 1760 160 1760 -32
WIRE 1984 192 1936 192
WIRE 1872 208 1840 208
WIRE 2096 224 1936 224
WIRE 2096 240 2096 224
WIRE 912 288 912 96
WIRE 1984 320 1984 192
WIRE 1984 320 1680 320
WIRE 2096 384 2096 320
WIRE 2096 496 2096 464
WIRE 1680 528 1680 320
WIRE 1760 544 1760 256
WIRE 1760 544 1728 544
WIRE 1728 640 1728 592
WIRE 1760 640 1760 624
WIRE 1760 640 1728 640
WIRE 1760 656 1760 640
FLAG 1760 656 0
FLAG 1680 608 0
FLAG 1904 240 -12V
FLAG 1904 176 12V
FLAG 2096 496 0
FLAG 2032 -176 0
FLAG 912 368 0
FLAG 2208 16 0
FLAG 2304 16 0
FLAG 2304 -64 -12V
FLAG 2208 -64 12V
FLAG 912 -256 5V
FLAG 1408 64 -12V
FLAG 2112 16 0
FLAG 2112 -64 5V
SYMBOL EXTRA\\IRF\\PMOSFET\\irf9540n 1760 -80 R0
SYMATTR InstName U1
SYMBOL EXTRA\\IRF\\NMOSFET\\irfz44n 1792 208 M0
SYMATTR InstName U3
SYMBOL voltage 2096 368 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 3 1.1m 900u 900u 1m 10m)
SYMBOL res 1744 528 R0
SYMATTR InstName R3
SYMATTR Value 0.1
SYMBOL e 1680 512 M0
SYMATTR InstName E1
SYMATTR Value 20
SYMBOL OpAmps\\UniversalOpAmp2 1904 208 M0
SYMATTR InstName U6
SYMATTR SpiceLine Ilimit=200m Rail=0 Vos=0
SYMBOL zener 1280 -224 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value TDZV16
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL voltage 2096 224 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value PULSE(0 12 6m 1n 1n 3m 100m)
SYMBOL nmos 1072 -112 R90
SYMATTR InstName M2
SYMATTR Value 2N7002
SYMBOL voltage 2032 -272 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 30
SYMBOL voltage 912 272 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(-12 5 0 1n 1n 2.5m 5m)
SYMBOL res 896 -208 R0
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL voltage 2208 -80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 12
SYMBOL voltage 2304 -80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value -12
SYMBOL res 1104 -224 R0
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL res 1392 -32 R0
SYMATTR InstName R5
SYMATTR Value 100k
SYMBOL zener 1664 -160 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value TFZV16B
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 1248 -176 R0
SYMATTR InstName R4
SYMATTR Value {Rtest}
SYMBOL res 896 0 R0
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL pmos 1360 -128 M180
SYMATTR InstName M1
SYMATTR Value BSS84
SYMBOL voltage 2112 -80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 5
TEXT 2264 136 Left 2 !.tran 10m
TEXT 1064 -488 Left 2 ;.step param Rtest list 1k 10k 100k
TEXT 1064 -544 Left 2 !.param Rtest 10k
