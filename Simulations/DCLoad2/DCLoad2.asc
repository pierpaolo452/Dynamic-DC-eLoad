Version 4
SHEET 1 2844 2772
WIRE 1120 -1712 1120 -1728
WIRE 1888 -1696 1888 -1728
WIRE 2080 -1632 2080 -1728
WIRE 608 -1600 608 -1648
WIRE 864 -1600 864 -1728
WIRE 1120 -1600 1120 -1712
WIRE 1888 -1584 1888 -1616
WIRE 2016 -1584 1888 -1584
WIRE 1888 -1552 1888 -1584
WIRE 2080 -1504 2080 -1536
WIRE -368 -1488 -368 -1552
WIRE -368 -1488 -480 -1488
WIRE 16 -1488 -368 -1488
WIRE 608 -1488 608 -1520
WIRE 864 -1488 864 -1520
WIRE 1120 -1488 1120 -1520
WIRE 16 -1424 16 -1488
WIRE 1888 -1424 1888 -1456
WIRE 2080 -1344 2080 -1424
WIRE -480 -1312 -480 -1488
WIRE -368 -1312 -368 -1344
WIRE -368 -1312 -480 -1312
WIRE 16 -1312 16 -1344
WIRE 16 -1312 -368 -1312
WIRE 1888 -1264 1888 -1296
WIRE -368 -1232 -368 -1312
WIRE 1824 -1216 1824 -1504
WIRE 2080 -1216 2080 -1264
WIRE 544 -1184 544 -1232
WIRE 1056 -1168 1056 -1216
WIRE 2016 -1168 1888 -1168
WIRE 1888 -1136 1888 -1168
WIRE -480 -1104 -480 -1312
WIRE -368 -1104 -368 -1152
WIRE -368 -1104 -480 -1104
WIRE 544 -1072 544 -1104
WIRE 1056 -1056 1056 -1088
WIRE 2080 -1056 2080 -1120
WIRE -368 -1040 -368 -1104
WIRE 1888 -1024 1888 -1056
WIRE -480 -928 -480 -1104
WIRE -368 -928 -368 -960
WIRE -368 -928 -480 -928
WIRE -368 -912 -368 -928
WIRE -368 -784 -368 -832
WIRE 1328 -400 1328 -416
WIRE 1328 -400 1136 -400
WIRE 2688 -400 2688 -416
WIRE 2688 -400 2496 -400
WIRE 1328 -368 1328 -400
WIRE 2688 -368 2688 -400
WIRE 1328 -256 1328 -288
WIRE 2688 -256 2688 -288
WIRE 1136 -112 1136 -400
WIRE 1328 -112 1328 -176
WIRE 1328 -112 1136 -112
WIRE 2496 -112 2496 -400
WIRE 2688 -112 2688 -176
WIRE 2688 -112 2496 -112
WIRE 1136 -96 1136 -112
WIRE 2496 -96 2496 -112
WIRE 1136 -16 1136 -32
WIRE 2496 -16 2496 -32
WIRE 1328 32 1328 -112
WIRE 2688 32 2688 -112
WIRE -1120 48 -1376 48
WIRE -784 48 -1120 48
WIRE 624 48 624 0
WIRE 1984 48 1984 0
WIRE 592 64 544 64
WIRE 1952 64 1904 64
WIRE -1120 80 -1120 48
WIRE 1136 80 1136 64
WIRE 1136 80 656 80
WIRE 1248 80 1136 80
WIRE 2496 80 2496 64
WIRE 2496 80 2016 80
WIRE 2608 80 2496 80
WIRE 592 96 432 96
WIRE 1952 96 1792 96
WIRE 624 160 624 112
WIRE 1984 160 1984 112
WIRE -1376 176 -1376 48
WIRE -1120 176 -1120 160
WIRE -1120 176 -1376 176
WIRE -1120 192 -1120 176
WIRE -1376 304 -1376 176
WIRE -1120 304 -1120 272
WIRE -1120 304 -1376 304
WIRE -1120 320 -1120 304
WIRE -1120 432 -1120 400
WIRE 1120 656 1120 608
WIRE 1152 656 1120 656
WIRE 1328 656 1328 128
WIRE 1328 656 1232 656
WIRE 2480 656 2480 608
WIRE 2512 656 2480 656
WIRE 2688 656 2688 128
WIRE 2688 656 2592 656
WIRE 1328 688 1328 656
WIRE 2688 688 2688 656
WIRE 1072 704 1072 672
WIRE 2432 704 2432 672
WIRE 1120 720 1120 656
WIRE 1120 720 1104 720
WIRE 2480 720 2480 656
WIRE 2480 720 2464 720
WIRE 544 736 544 64
WIRE 976 736 544 736
WIRE 1040 736 976 736
WIRE 1904 736 1904 64
WIRE 2336 736 1904 736
WIRE 2400 736 2336 736
WIRE 1120 752 1104 752
WIRE 2480 752 2464 752
WIRE 1072 800 1072 768
WIRE 1120 800 1120 752
WIRE 1152 800 1120 800
WIRE 1328 800 1328 768
WIRE 1328 800 1232 800
WIRE 2432 800 2432 768
WIRE 2480 800 2480 752
WIRE 2512 800 2480 800
WIRE 2688 800 2688 768
WIRE 2688 800 2592 800
WIRE 976 912 976 736
WIRE 1008 912 976 912
WIRE 1120 912 1120 800
WIRE 1120 912 1088 912
WIRE 2336 912 2336 736
WIRE 2368 912 2336 912
WIRE 2480 912 2480 800
WIRE 2480 912 2448 912
WIRE 1328 1072 1328 800
WIRE 2688 1072 2688 800
WIRE 2688 1072 1328 1072
WIRE 1088 1264 1088 1216
WIRE 1120 1264 1088 1264
WIRE 1328 1264 1328 1072
WIRE 1328 1264 1200 1264
WIRE 1328 1296 1328 1264
WIRE 1040 1312 1040 1280
WIRE 656 1328 656 1296
WIRE 1088 1328 1088 1264
WIRE 1088 1328 1072 1328
WIRE 848 1344 688 1344
WIRE 944 1344 848 1344
WIRE 1008 1344 944 1344
WIRE 208 1360 176 1360
WIRE 416 1360 352 1360
WIRE 624 1360 560 1360
WIRE 1088 1360 1072 1360
WIRE 720 1376 688 1376
WIRE 752 1376 720 1376
WIRE 352 1392 352 1360
WIRE 1040 1408 1040 1376
WIRE 1088 1408 1088 1360
WIRE 1120 1408 1088 1408
WIRE 1328 1408 1328 1376
WIRE 1328 1408 1200 1408
WIRE 656 1424 656 1392
WIRE 352 1488 352 1456
WIRE 1328 1504 1328 1408
WIRE 944 1520 944 1344
WIRE 976 1520 944 1520
WIRE 1088 1520 1088 1408
WIRE 1088 1520 1056 1520
WIRE 208 1584 208 1360
WIRE 720 1584 720 1376
WIRE 720 1584 208 1584
FLAG -1120 432 0
FLAG -368 -1552 UUT
FLAG 1328 -416 UUT
FLAG -368 -784 0
FLAG -480 -784 0
FLAG 544 -1072 0
FLAG 544 -1232 CVCR
FLAG 1056 -1056 0
FLAG 1056 -1216 CVCRN
FLAG 1888 -1024 0
FLAG 2080 -1056 0
FLAG 1888 -1728 9V
FLAG 1888 -1424 0
FLAG 1888 -1296 9V
FLAG 2080 -1728 9V
FLAG 608 -1488 0
FLAG 608 -1648 12V
FLAG 864 -1728 9v
FLAG 864 -1488 0
FLAG 1120 -1488 0
FLAG 1120 -1712 -5V
FLAG 1328 1504 0
FLAG 624 160 -5V
FLAG 624 0 12V
FLAG -784 48 DAC
FLAG 656 1424 -5V
FLAG 656 1296 12V
FLAG 432 96 INLOOP
FLAG 752 1376 DAC
FLAG 176 1360 INLOOP
FLAG 1040 1280 -5V
FLAG 1040 1408 12V
FLAG 1088 1136 0
FLAG 1072 672 -5V
FLAG 1072 800 12V
FLAG 1120 528 0
FLAG 2688 -416 UUT
FLAG 1984 160 -5V
FLAG 1984 0 12V
FLAG 1792 96 INLOOP
FLAG 2432 672 -5V
FLAG 2432 800 12V
FLAG 2480 528 0
FLAG 352 1488 0
FLAG 848 1344 Isense
SYMBOL voltage -368 -1056 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 {Vuut} 5000u 1n 1n 3000u 14000u)
SYMBOL res 1312 672 R0
SYMATTR InstName Shunt2
SYMATTR Value 50m
SYMATTR SpiceLine pwr=5
SYMBOL bv -368 -1440 R0
SYMATTR InstName B1
SYMATTR Value V=(white(2e5*time)/3)
SYMBOL voltage 16 -1440 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value SINE(0 200m 100k)
SYMBOL ind 1312 -384 R0
SYMATTR InstName L1
SYMATTR Value {Luut}
SYMATTR SpiceLine Rser=0
SYMBOL res 1312 -272 R0
SYMATTR InstName R1
SYMATTR Value {Ruut}
SYMBOL voltage -368 -928 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value {Vuut}
SYMBOL voltage 544 -1200 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value PULSE(0 3.3 0 1n 1n 600u 1200u)
SYMBOL voltage 1056 -1184 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value PULSE(3.3 0 0 1n 1n 600u 1200u)
SYMBOL cap 1120 -96 R0
SYMATTR InstName C2
SYMATTR Value 100p
SYMBOL res 1120 -32 R0
SYMATTR InstName R6
SYMATTR Value {Rstab}
SYMBOL npn 1824 -1264 R0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL pnp 2016 -1120 M180
SYMATTR InstName Q2
SYMATTR Value 2N3906
SYMBOL res 1872 -1152 R0
SYMATTR InstName R7
SYMATTR Value 5k
SYMBOL res 1872 -1712 R0
SYMATTR InstName R9
SYMATTR Value 5k
SYMBOL npn 2016 -1632 R0
SYMATTR InstName Q3
SYMATTR Value 2N3904
SYMBOL pnp 1824 -1456 M180
SYMATTR InstName Q4
SYMATTR Value 2N3906
SYMBOL res 2064 -1520 R0
SYMATTR InstName R10
SYMATTR Value 10
SYMBOL res 2064 -1360 R0
SYMATTR InstName R12
SYMATTR Value 10
SYMBOL voltage 608 -1616 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value 12
SYMBOL voltage 864 -1616 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value 9
SYMBOL voltage -1120 304 R0
WINDOW 0 -143 49 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName MSB_Dac
SYMATTR Value {MaxDAC}
SYMBOL voltage -1120 176 R0
WINDOW 0 -143 49 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName MSB_Dac2
SYMATTR Value PULSE(0 {MaxDAC} 2000u 1n 1n 4000u 15000u)
SYMBOL voltage 1120 -1616 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value -5v
SYMBOL voltage -1120 64 R0
WINDOW 0 -143 49 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName MSB_Dac3
SYMATTR Value PWL(0 0 6000u 0 7000u {MaxDAC} 8000u 0)
SYMBOL voltage -368 -1248 R0
WINDOW 0 -143 49 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName MSB_Dac7
SYMATTR Value PWL(0 0 2000u 0 3000u {Vuut} 4000u 0)
SYMBOL EXTRA\\IRF\\NMOSFET\\irfp150n 1296 80 R0
SYMATTR InstName U2
SYMBOL res 1312 1280 R0
SYMATTR InstName MainShunt
SYMATTR Value 10m
SYMATTR SpiceLine pwr=5
SYMBOL EXTRA\\AudioOpamp\\TI\\TL072 624 80 R0
SYMATTR InstName U4
SYMBOL OpAmps\\OP07 656 1296 M0
SYMATTR InstName U6
SYMBOL res 1216 1424 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R19
SYMATTR Value 100
SYMBOL res 1216 1280 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R20
SYMATTR Value 100
SYMBOL res 1072 1536 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R21
SYMATTR Value 2.5k
SYMBOL res 1072 1232 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R22
SYMATTR Value 2.5k
SYMBOL res 1248 816 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R4
SYMATTR Value 100
SYMBOL res 1248 672 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R5
SYMATTR Value 100
SYMBOL res 1104 928 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL res 1104 624 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL res 2672 672 R0
SYMATTR InstName Shunt1
SYMATTR Value 50m
SYMATTR SpiceLine pwr=5
SYMBOL ind 2672 -384 R0
SYMATTR InstName L2
SYMATTR Value {Luut}
SYMATTR SpiceLine Rser=0
SYMBOL res 2672 -272 R0
SYMATTR InstName R2
SYMATTR Value {Ruut}
SYMBOL cap 2480 -96 R0
SYMATTR InstName C1
SYMATTR Value 100p
SYMBOL res 2480 -32 R0
SYMATTR InstName R13
SYMATTR Value {Rstab}
SYMBOL EXTRA\\IRF\\NMOSFET\\irfp150n 2656 80 R0
SYMATTR InstName U5
SYMBOL EXTRA\\AudioOpamp\\TI\\TL072 1984 80 R0
SYMATTR InstName U7
SYMBOL res 2608 816 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R14
SYMATTR Value 100
SYMBOL res 2608 672 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R15
SYMATTR Value 100
SYMBOL res 2464 928 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R16
SYMATTR Value 1k
SYMBOL res 2464 624 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R18
SYMATTR Value 1k
SYMBOL res 512 1344 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value 100
SYMBOL cap 336 1392 R0
SYMATTR InstName C3
SYMATTR Value 47µ
SYMBOL OpAmps\\OP07 1072 800 R180
SYMATTR InstName U1
SYMBOL OpAmps\\OP07 1040 1408 R180
SYMATTR InstName U3
SYMBOL OpAmps\\OP07 2432 800 R180
SYMATTR InstName U8
TEXT -712 936 Left 2 !.dc MSB_Dac 0 {MaxDAC}
TEXT -1544 888 Left 2 !.param VUUT=12
TEXT -1520 832 Left 2 !.param Ruut=10m Luut=10n Rstab=10k
TEXT -704 888 Left 2 ;.dc temp 25 175
TEXT -712 840 Left 2 ;.tran 0 9000u 50u
TEXT -712 792 Left 2 !.op
TEXT -1488 952 Left 2 !.param MaxDAC=1
